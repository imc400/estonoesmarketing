<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Esto NO es Marketing</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700;800&family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <!-- Confetti Library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <!-- Tracking Scripts -->
    <script src="microsoft-clarity.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JDNRWYXLDV"></script>
    <script src="google-analytics.js"></script>
    <script src="meta-pixel.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: #0a0a0a;
            color: #ffffff;
            overflow: hidden;
            height: 100vh;
            cursor: none;
        }

        /* Custom Cursor */
        .custom-cursor {
            width: 20px;
            height: 20px;
            border: 2px solid #10b981;
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transition: all 0.15s ease;
            mix-blend-mode: difference;
        }

        .custom-cursor.clicking {
            transform: scale(2);
            background: rgba(16, 185, 129, 0.5);
        }

        /* Progress Dots */
        .progress-dots {
            position: fixed;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 100;
        }

        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .dot.active {
            background: #10b981;
            box-shadow: 0 0 20px #10b981;
            width: 40px;
            border-radius: 6px;
        }

        /* Step Container */
        .step {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease;
            padding: 80px 0;
            overflow-y: auto;
        }

        .step.active {
            opacity: 1;
            visibility: visible;
        }

        .step-content {
            text-align: center;
            max-width: 900px;
            padding: 0 40px;
            margin: auto;
        }

        /* Matrix Background */
        .matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.03;
        }

        /* ================================================
           STEP 1: HERO
        ================================================ */
        .hero-badge {
            display: inline-block;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid #10b981;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 12px;
            color: #10b981;
            margin-bottom: 40px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .hero-title {
            font-size: 72px;
            font-weight: 800;
            margin-bottom: 30px;
            line-height: 1.1;
        }

        .hero-title .strike {
            text-decoration: line-through;
            text-decoration-color: #ff6b6b;
            text-decoration-thickness: 4px;
            color: #666;
            animation: glitch-pulse 3s infinite;
        }

        @keyframes glitch-pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; text-shadow: 2px 2px #ff6b6b, -2px -2px #10b981; }
        }

        .hero-text {
            font-size: 20px;
            color: #cccccc;
            margin-bottom: 25px;
            font-family: 'Inter', sans-serif;
            line-height: 1.7;
        }

        .hero-text strong {
            color: #ffffff;
            font-weight: 700;
        }

        /* 3D Lock */
        .lock-container {
            width: 300px;
            height: 300px;
            margin: 40px auto 30px;
            cursor: pointer;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: float-lock 3s ease-in-out infinite;
        }

        @keyframes float-lock {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .lock-container:hover {
            animation: shake-lock 0.3s ease-in-out infinite;
        }

        @keyframes shake-lock {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }

        .lock-body {
            width: 150px;
            height: 120px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 20px;
            position: relative;
            box-shadow: 0 10px 40px rgba(16, 185, 129, 0.6),
                        inset 0 -5px 20px rgba(0, 0, 0, 0.3);
            border: 4px solid #ffffff;
        }

        .lock-shackle {
            width: 100px;
            height: 80px;
            border: 15px solid #10b981;
            border-bottom: none;
            border-radius: 50px 50px 0 0;
            position: absolute;
            top: -70px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.5),
                        inset 0 5px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.5s ease;
        }

        .lock-container.unlocking .lock-shackle {
            transform: translateX(-50%) translateY(-20px) rotate(-45deg);
            transform-origin: left bottom;
        }

        .lock-keyhole {
            width: 20px;
            height: 35px;
            background: rgba(0, 0, 0, 0.4);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 10px 10px 5px 5px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.5);
        }

        .lock-keyhole::after {
            content: '';
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 15px solid rgba(0, 0, 0, 0.4);
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
        }

        .lock-glow {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 20px;
            box-shadow: 0 0 60px rgba(16, 185, 129, 0.8);
            animation: pulse-glow-lock 2s ease-in-out infinite;
        }

        @keyframes pulse-glow-lock {
            0%, 100% {
                box-shadow: 0 0 40px rgba(16, 185, 129, 0.6);
            }
            50% {
                box-shadow: 0 0 80px rgba(16, 185, 129, 0.9);
            }
        }

        .cta-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: #000000;
            padding: 25px 60px;
            border: none;
            border-radius: 16px;
            font-size: 20px;
            font-weight: 700;
            cursor: pointer;
            font-family: 'JetBrains Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.3s ease;
            box-shadow: 0 15px 50px rgba(16, 185, 129, 0.4);
            position: relative;
            overflow: hidden;
        }

        .cta-btn:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 20px 60px rgba(16, 185, 129, 0.7);
        }

        .cta-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .cta-btn:hover::before {
            left: 100%;
        }

        /* ================================================
           PORTAL TUNNEL EFFECT
        ================================================ */
        .tunnel-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #000000;
            z-index: 9998;
            pointer-events: none;
            opacity: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tunnel-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .tunnel-canvas {
            width: 100%;
            height: 100%;
        }

        /* Portal circles */
        @keyframes portal-expand {
            0% {
                transform: translate(-50%, -50%) scale(0) rotate(0deg);
                opacity: 0;
                border-width: 8px;
            }
            30% {
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(20) rotate(720deg);
                opacity: 0;
                border-width: 1px;
            }
        }

        @keyframes portal-pulse {
            0%, 100% {
                box-shadow: 0 0 20px #10b981, 0 0 40px #10b981, 0 0 60px #10b981, inset 0 0 20px #10b981;
            }
            50% {
                box-shadow: 0 0 40px #10b981, 0 0 80px #10b981, 0 0 120px #10b981, inset 0 0 40px #10b981;
            }
        }

        .portal-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 4px solid #10b981;
            animation: portal-expand 1.5s ease-out forwards, portal-pulse 1.5s ease-in-out;
        }

        .portal-circle:nth-child(1) { animation-delay: 0s; border-color: #10b981; }
        .portal-circle:nth-child(2) { animation-delay: 0.15s; border-color: #059669; }
        .portal-circle:nth-child(3) { animation-delay: 0.3s; border-color: #10b981; }
        .portal-circle:nth-child(4) { animation-delay: 0.45s; border-color: #059669; }
        .portal-circle:nth-child(5) { animation-delay: 0.6s; border-color: #10b981; }
        .portal-circle:nth-child(6) { animation-delay: 0.75s; border-color: #059669; }

        /* Vortex particles */
        @keyframes vortex-spin {
            0% {
                transform: translate(-50%, -50%) scale(0) rotate(0deg);
                opacity: 0;
            }
            20% {
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(15) rotate(1080deg);
                opacity: 0;
            }
        }

        .vortex-particle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 4px;
            height: 4px;
            background: #10b981;
            border-radius: 50%;
            box-shadow: 0 0 10px #10b981;
        }

        /* Center glow */
        @keyframes center-glow {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            50% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(3);
                opacity: 0;
            }
        }

        .center-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, #10b981 0%, transparent 70%);
            border-radius: 50%;
            animation: center-glow 1.5s ease-out forwards;
        }

        /* Portal Text */
        .portal-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 32px;
            font-weight: 800;
            color: #10b981;
            font-family: 'JetBrains Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 4px;
            z-index: 100;
            text-shadow: 0 0 20px rgba(16, 185, 129, 0.8);
            animation: portal-text-fade 2s ease-in-out forwards;
            white-space: nowrap;
        }

        @keyframes portal-text-fade {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            30% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            70% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(1.2);
            }
        }

        /* ================================================
           LOADING SYSTEM TRANSITION
        ================================================ */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #0a0a0a;
            z-index: 9998;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .loading-screen.active {
            opacity: 1;
            pointer-events: all;
        }

        .loading-text {
            font-size: 24px;
            color: #10b981;
            margin-bottom: 40px;
            font-family: 'JetBrains Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 3px;
            animation: pulse-text 1.5s ease-in-out infinite;
        }

        @keyframes pulse-text {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .loading-bar-container {
            width: 500px;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.2);
        }

        .loading-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #10b981, #059669, #10b981);
            background-size: 200% 100%;
            animation: loading-progress 2.5s ease-out forwards, loading-gradient 1s linear infinite;
            box-shadow: 0 0 20px #10b981;
            border-radius: 10px;
        }

        @keyframes loading-progress {
            0% { width: 0%; }
            20% { width: 30%; }
            40% { width: 50%; }
            60% { width: 70%; }
            80% { width: 90%; }
            100% { width: 100%; }
        }

        @keyframes loading-gradient {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        .loading-percentage {
            margin-top: 20px;
            font-size: 48px;
            font-weight: 800;
            color: #10b981;
            font-family: 'JetBrains Mono', monospace;
            text-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
        }

        .loading-subtext {
            margin-top: 30px;
            font-size: 14px;
            color: #666;
            font-family: 'Inter', sans-serif;
            font-style: italic;
        }

        /* Glitch Break Transition */
        .glitch-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: #0a0a0a;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.2s ease;
        }

        .glitch-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .glitch-text {
            font-size: 48px;
            font-weight: 800;
            color: #10b981;
            font-family: 'JetBrains Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 8px;
            animation: glitch-intense 0.15s infinite;
        }

        @keyframes glitch-intense {
            0% {
                transform: translate(0);
                text-shadow: 0 0 20px #10b981;
            }
            20% {
                transform: translate(-8px, 8px);
                text-shadow: -8px 8px 0 #ff6b6b, 8px -8px 0 #10b981;
            }
            40% {
                transform: translate(8px, -8px);
                text-shadow: 8px -8px 0 #ff6b6b, -8px 8px 0 #10b981;
            }
            60% {
                transform: translate(-8px, -8px);
                text-shadow: -8px -8px 0 #ff6b6b, 8px 8px 0 #10b981;
            }
            80% {
                transform: translate(8px, 8px);
                text-shadow: 8px 8px 0 #ff6b6b, -8px -8px 0 #10b981;
            }
            100% {
                transform: translate(0);
                text-shadow: 0 0 20px #10b981;
            }
        }

        /* Glitch effect on loading text */
        @keyframes glitch-loading {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        .loading-text.glitch {
            animation: pulse-text 1.5s ease-in-out infinite, glitch-loading 0.3s ease-in-out infinite;
        }

        /* ================================================
           GLASS SHATTER EFFECT
        ================================================ */
        .glass-shard {
            position: absolute;
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid #10b981;
            pointer-events: none;
            opacity: 1;
        }

        @keyframes shatter-fall {
            0% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx), 100vh) rotate(var(--rotate));
                opacity: 0;
            }
        }

        .message-box.shattering {
            position: relative;
            overflow: visible;
        }

        /* Crack lines overlay */
        .crack-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
            opacity: 0;
        }

        .crack-overlay.active {
            opacity: 1;
        }

        .crack-line {
            position: absolute;
            background: #ff6b6b;
            box-shadow: 0 0 10px #ff6b6b;
            animation: crack-expand 0.3s ease-out forwards;
        }

        @keyframes crack-expand {
            from {
                transform: scale(0);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* ================================================
           SYSTEM ALERT
        ================================================ */
        .system-alert {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid #10b981;
            border-radius: 16px;
            padding: 40px 60px;
            z-index: 10000;
            opacity: 0;
            box-shadow: 0 20px 60px rgba(16, 185, 129, 0.4), 0 0 100px rgba(16, 185, 129, 0.2);
            max-width: 500px;
            text-align: center;
        }

        .system-alert.show {
            animation: alert-popup 0.4s ease-out forwards;
        }

        .system-alert.hide {
            animation: alert-dismiss 0.3s ease-in forwards;
        }

        @keyframes alert-popup {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            60% {
                transform: translate(-50%, -50%) scale(1.1);
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        @keyframes alert-dismiss {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }
        }

        .alert-icon {
            font-size: 48px;
            margin-bottom: 20px;
            animation: pulse-icon 1.5s ease-in-out infinite;
        }

        @keyframes pulse-icon {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        .alert-text {
            font-size: 24px;
            font-weight: 700;
            color: #10b981;
            font-family: 'JetBrains Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 20px rgba(16, 185, 129, 0.5);
        }

        /* ================================================
           TIME COUNTER
        ================================================ */
        .time-counter {
            padding: 30px;
            background: rgba(16, 185, 129, 0.1);
            border: 2px solid #10b981;
            border-radius: 16px;
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.3);
        }

        .counter-item {
            text-align: center;
            min-width: 100px;
        }

        .counter-value {
            font-size: 48px;
            font-weight: 800;
            color: #10b981;
            font-family: 'JetBrains Mono', monospace;
            text-shadow: 0 0 20px rgba(16, 185, 129, 0.8);
            margin-bottom: 8px;
            line-height: 1;
        }

        .counter-label {
            font-size: 14px;
            font-weight: 600;
            color: #ffffff;
            font-family: 'JetBrains Mono', monospace;
            letter-spacing: 2px;
            opacity: 0.7;
        }

        /* ================================================
           STEP 2: POST-TUNNEL MESSAGE
        ================================================ */
        .message-box {
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid #10b981;
            border-radius: 20px;
            padding: 60px;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }

        .message-box::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(16, 185, 129, 0.1) 0%, transparent 70%);
            animation: rotate-bg 8s linear infinite;
        }

        @keyframes rotate-bg {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .message-content {
            position: relative;
            z-index: 2;
        }

        .message-title {
            font-size: 48px;
            font-weight: 800;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #10b981, #ffffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .message-text {
            font-size: 20px;
            color: #cccccc;
            line-height: 1.8;
            margin-bottom: 20px;
            font-family: 'Inter', sans-serif;
        }

        .message-text strong {
            color: #ffffff;
            font-weight: 700;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 48px;
            }

            .hero-text {
                font-size: 18px;
            }

            .mystery-box {
                width: 250px;
                height: 250px;
            }

            .box-face {
                width: 180px;
                height: 180px;
                font-size: 50px;
            }

            .cta-btn {
                padding: 20px 40px;
                font-size: 16px;
            }

            .message-box {
                padding: 40px 30px;
            }

            .message-title {
                font-size: 32px;
            }

            .message-text {
                font-size: 16px;
            }

            .loading-text {
                font-size: 13px;
                padding: 0 20px;
                text-align: center;
                letter-spacing: 1px;
                word-break: break-word;
            }

            .loading-bar-container {
                width: 90%;
                max-width: 350px;
            }

            .loading-percentage {
                font-size: 36px;
            }

            .loading-subtext {
                font-size: 12px;
                padding: 0 30px;
                text-align: center;
            }

            .system-alert {
                padding: 30px 40px;
                max-width: 90%;
            }

            .alert-icon {
                font-size: 36px;
                margin-bottom: 15px;
            }

            .alert-text {
                font-size: 18px;
                letter-spacing: 1px;
            }
        }
    </style>
</head>
<body>
    <!-- Custom Cursor -->
    <div class="custom-cursor"></div>

    <!-- Progress Dots -->
    <div class="progress-dots">
        <div class="dot active"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
    </div>

    <!-- Matrix Background -->
    <canvas class="matrix-bg" id="matrixCanvas"></canvas>

    <!-- Tunnel Overlay -->
    <div class="tunnel-overlay" id="tunnelOverlay">
        <div class="tunnel" id="tunnel"></div>
    </div>

    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-text" id="loadingText">> ANALIZANDO NIVELES DE HONESTIDAD...</div>
        <div class="loading-bar-container">
            <div class="loading-bar" id="loadingBar"></div>
        </div>
        <div class="loading-percentage" id="loadingPercentage">0%</div>
        <div class="loading-subtext">(No te preocupes, esto es más rápido que pedir presupuestos a otras agencias)</div>
    </div>

    <!-- System Alert -->
    <div class="system-alert" id="systemAlert">
        <div class="alert-icon"></div>
        <div class="alert-text">La curiosidad siempre gana</div>
    </div>

    <!-- Glitch Break Overlay -->
    <div class="glitch-overlay" id="glitchOverlay">
        <div class="glitch-text" id="glitchText">RECALCULANDO</div>
    </div>

    <!-- ================================================
         STEP 1: HERO
    ================================================ -->
    <div class="step active" id="step1">
        <div class="step-content">
            <div class="hero-badge">BIENVENIDO</div>

            <h1 class="hero-title">
                ESTO <span class="strike">NO</span> ES<br>MARKETING
            </h1>

            <p class="hero-text">
                No te voy a pedir tu email ni tu teléfono.<br>
                <strong>No me interesa tener los datos de alguien<br>
                que no quiere hablar conmigo.</strong><br><br>
                Todavía.
            </p>

            <div class="lock-container" id="lockContainer">
                <div class="lock-body">
                    <div class="lock-glow"></div>
                    <div class="lock-shackle"></div>
                    <div class="lock-keyhole"></div>
                </div>
            </div>

            <button class="cta-btn" id="openBoxBtn">
                > DESBLOQUEAR_
            </button>
        </div>
    </div>

    <!-- ================================================
         STEP 1.5: REVELACIÓN POST-PORTAL
    ================================================ -->
    <div class="step" id="step1-5">
        <div class="step-content">
            <div class="message-box" id="glassBox">
                <div class="message-content">
                    <div style="text-align: left; max-width: 700px; margin: 0 auto;">
                        <h2 class="message-title" style="color: #10b981; margin-bottom: 30px;">Bienvenido a EstoNoEsMarketing</h2>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 20px;">
                            Primero que todo, explicarte que <strong>estás leyendo esto sólo por curiosidad</strong>.
                        </p>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 20px;">
                            Le diste click al botón <strong>"DESBLOQUEAR"</strong> netamente porque es <strong style="color: #10b981;">distinto a lo que has visto antes</strong>.
                        </p>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 20px;">
                            El candado que se desbloquea es sólo para demostrar que es algo <strong>"privado"</strong> y que <strong>tú lo podías desbloquear</strong>, por eso el mensaje de <strong style="color: #10b981;">"ACCESO AUTORIZADO"</strong>...
                        </p>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 20px;">
                            Eso se hace para que gran % de las personas <strong>sigan avanzando en el paso a paso</strong>.
                        </p>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 40px;">
                            Porque a todo esto... <strong style="color: #ff6b6b;">estás en un embudo de ventas</strong>.
                        </p>

                        <div style="text-align: center; margin-top: 50px;">
                            <button class="cta-btn" id="step1-5Btn">
                                > Jaja, ok, me gusta tu honestidad_
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ================================================
         STEP 2: PRESENTACIÓN PERSONAL
    ================================================ -->
    <div class="step" id="step2">
        <div class="step-content">
            <div class="message-box">
                <div class="message-content">
                    <h2 class="message-title">Me presento</h2>

                    <div style="margin: 40px 0;">
                        <img src="nacho-working.jpg"
                             alt="Nacho trabajando"
                             style="width: 250px; height: 250px; object-fit: cover; border-radius: 50%; border: 4px solid #10b981; box-shadow: 0 10px 40px rgba(16, 185, 129, 0.4);">
                    </div>

                    <p class="message-text" style="font-size: 22px; color: #ffffff; margin-bottom: 30px;">
                        <strong>Me puedes decir Nacho</strong>
                    </p>

                    <p class="message-text">
                        Me dedico al marketing digital y a vender por internet hace <strong>6 años</strong>.
                    </p>

                    <p class="message-text" style="margin-top: 25px;">
                        Creé <strong style="color: #10b981;">estonoesmarketing.cl</strong> para poder enseñar a otros a hacer lo mismo que yo.
                    </p>

                    <p class="message-text" style="margin-top: 25px;">
                        Ya lo enseño en la <strong style="color: #10b981;">Universidad de los Andes</strong> a todo esto...
                    </p>

                    <button class="cta-btn" id="step2Btn" style="margin-top: 40px;">
                        > OK, TIENES MI ATENCIÓN_
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ================================================
         STEP 3: TRANSPARENCIA PARADÓJICA
    ================================================ -->
    <div class="step" id="step3">
        <div class="step-content">
            <div class="message-box">
                <div class="message-content">
                    <div style="text-align: left; max-width: 700px; margin: 0 auto;">
                        <h2 class="message-title" style="color: #10b981; margin-bottom: 30px;">¿Te diste cuenta?</h2>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 25px;">
                            Ya pasaste por <strong style="color: #10b981;">3 pasos</strong> sin siquiera notarlo.
                        </p>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 25px;">
                            Cada click que hiciste <strong>bajó tus barreras</strong> un poco más.
                        </p>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 25px;">
                            El candado, el túnel, la revelación... todo <strong>diseñado para mantenerte aquí</strong>.
                        </p>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 25px;">
                            Y funciona porque <strong style="color: #10b981;">te sentiste identificado</strong>.
                        </p>

                        <div style="background: rgba(16, 185, 129, 0.1); border-left: 4px solid #10b981; padding: 25px; margin: 35px 0; border-radius: 8px;">
                            <p class="message-text" style="font-size: 19px; margin-bottom: 0; font-style: italic;">
                                A esto le llamo <strong style="color: #10b981; font-size: 22px;">TRANSPARENCIA PARADÓJICA</strong>.
                            </p>
                        </div>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 25px;">
                            Te digo <strong>exactamente lo que estoy haciendo</strong>... y aún así, sigues leyendo.
                        </p>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 25px;">
                            Porque la honestidad radical <strong style="color: #10b981;">genera más confianza que cualquier táctica oculta</strong>.
                        </p>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 40px;">
                            <strong>Esto es lo que enseño.</strong><br>
                            Marketing que funciona <strong>sin mentiras</strong>, sin promesas falsas, sin manipulación barata.
                        </p>

                        <div style="text-align: center; margin-top: 50px;">
                            <button class="cta-btn" id="step3Btn">
                                > Quiero aprender esto_
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ================================================
         STEP 4: REVELACIÓN IA
    ================================================ -->
    <div class="step" id="step4">
        <div class="step-content">
            <div class="message-box">
                <div class="message-content">
                    <div style="text-align: center; max-width: 700px; margin: 0 auto;">
                        <h2 class="message-title" style="color: #10b981; margin-bottom: 40px;">Una última cosa...</h2>

                        <p class="message-text" style="font-size: 19px; margin-bottom: 30px; text-align: left;">
                            Todo lo que has visto hasta acá <strong style="color: #10b981;">lo creé con Inteligencia Artificial</strong>.
                        </p>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 25px; text-align: left;">
                            Cada efecto visual, el candado que se desbloquea, el túnel portal, los colores, la tipografía, esta página web <strong>completa</strong>...
                        </p>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 30px; text-align: left;">
                            <strong style="color: #ff6b6b;">Todo automatizado con IA.</strong>
                        </p>

                        <div style="background: rgba(255, 107, 107, 0.1); border-left: 4px solid #ff6b6b; padding: 25px; margin: 35px 0; border-radius: 8px;">
                            <p class="message-text" style="font-size: 19px; margin-bottom: 0; text-align: left;">
                                <strong>Excepto lo más importante:</strong> el mensaje.
                            </p>
                        </div>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 25px; text-align: left;">
                            La tecnología la utilicé <strong>sólo para captar tu atención</strong>.
                        </p>

                        <p class="message-text" style="font-size: 19px; margin-bottom: 40px; text-align: left;">
                            Y sé que lo logré... <strong style="color: #10b981;">porque estás acá</strong>.
                        </p>

                        <p class="message-text" style="font-size: 17px; margin-bottom: 40px; text-align: left; opacity: 0.8;">
                            La IA es una herramienta poderosa. Pero sin estrategia, sin mensaje, sin entender <strong>por qué</strong> la gente hace click... es solo tecnología vacía.
                        </p>

                        <div style="text-align: center; margin-top: 50px;">
                            <button class="cta-btn" id="step4Btn">
                                > Enséñame cómo lo hiciste_
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ================================================
         STEP 5: VIDEO FINAL
    ================================================ -->
    <div class="step" id="step5">
        <div class="step-content">
            <div class="message-box">
                <div class="message-content">
                    <div style="text-align: center; max-width: 800px; margin: 0 auto;">
                        <h2 class="message-title" style="color: #10b981; margin-bottom: 30px;">Ya estás casi al final</h2>

                        <p class="message-text" style="font-size: 19px; margin-bottom: 25px;">
                            <strong>Ya estás comprometido.</strong>
                        </p>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 30px;">
                            Te falta muy poco.
                        </p>

                        <p class="message-text" style="font-size: 18px; margin-bottom: 40px;">
                            Para seguir avanzando es necesario que <strong style="color: #10b981;">veas este video</strong>.
                        </p>

                        <!-- Video Container -->
                        <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; background: #000; border-radius: 12px; margin: 40px 0; box-shadow: 0 20px 60px rgba(16, 185, 129, 0.3);">
                            <iframe
                                id="loomVideo"
                                src="https://www.loom.com/embed/a78dbfcc0ca04682bd69acd980d22d7c?sid=126208bb-f4f2-47ee-bb33-839a9aa401d4"
                                frameborder="0"
                                webkitallowfullscreen
                                mozallowfullscreen
                                allowfullscreen
                                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;">
                            </iframe>
                        </div>

                        <p class="message-text" style="font-size: 16px; margin-top: 40px; opacity: 0.7;">
                            Este video cambiará tu perspectiva sobre el marketing digital.
                        </p>

                        <button class="cta-btn" id="step5Btn" style="margin-top: 50px;">
                            > Ya vi el video, continuemos_
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ================================================
         STEP 6: OFERTA FINAL
    ================================================ -->
    <div class="step" id="step6">
        <div class="step-content">
            <div class="message-box">
                <div class="message-content">
                    <div style="text-align: center; max-width: 900px; margin: 0 auto;">

                        <!-- Urgency Badge -->
                        <div style="display: inline-block; background: rgba(255, 107, 107, 0.2); border: 2px solid #ff6b6b; padding: 12px 30px; border-radius: 30px; font-size: 13px; color: #ff6b6b; margin-bottom: 30px; text-transform: uppercase; letter-spacing: 2px; font-weight: 700; animation: pulse-glow 1.5s ease-in-out infinite;">
                            OFERTA EXPIRA EN:
                        </div>

                        <!-- Countdown Timer -->
                        <div id="countdownTimer" style="font-size: 56px; font-weight: 800; color: #ff6b6b; font-family: 'JetBrains Mono', monospace; margin-bottom: 20px; text-shadow: 0 0 30px rgba(255, 107, 107, 0.6);">
                            15:00
                        </div>

                        <p style="font-size: 16px; color: #ff6b6b; margin-bottom: 40px; font-weight: 600;">
                            Esta oferta no volverá a estar disponible
                        </p>

                        <h2 class="message-title" style="color: #10b981; margin-bottom: 20px; font-size: 52px;">Este es tu momento</h2>

                        <p class="message-text" style="font-size: 20px; margin-bottom: 40px;">
                            Llegaste hasta el final. <strong>Eres parte del 1% que realmente toma acción</strong>.
                        </p>

                        <!-- Pricing Section -->
                        <div style="background: rgba(16, 185, 129, 0.05); border: 2px solid #10b981; border-radius: 20px; padding: 50px 40px; margin: 40px 0;">

                            <h3 style="font-size: 28px; color: #ffffff; margin-bottom: 30px; font-family: 'Inter', sans-serif;">Acceso Completo a ESTONOESMARKETING</h3>

                            <p style="font-size: 16px; color: #10b981; margin-bottom: 35px; font-weight: 600;">
                                Aprende TODO lo que viste en este embudo + mucho más
                            </p>

                            <!-- Cursos Disponibles -->
                            <div style="text-align: left; max-width: 600px; margin: 0 auto 40px;">
                                <div style="display: flex; align-items: center; margin-bottom: 20px; padding: 15px; background: rgba(16, 185, 129, 0.1); border-radius: 12px;">
                                    <div style="width: 8px; height: 8px; background: #10b981; border-radius: 50%; margin-right: 15px; box-shadow: 0 0 10px #10b981;"></div>
                                    <div>
                                        <strong style="color: #10b981; font-size: 18px;">Shopify Avanzado</strong>
                                        <div style="font-size: 14px; color: #999; margin-top: 5px;">YA DISPONIBLE</div>
                                    </div>
                                </div>

                                <div style="display: flex; align-items: center; margin-bottom: 20px; padding: 15px; background: rgba(16, 185, 129, 0.1); border-radius: 12px;">
                                    <div style="width: 8px; height: 8px; background: #10b981; border-radius: 50%; margin-right: 15px; box-shadow: 0 0 10px #10b981;"></div>
                                    <div>
                                        <strong style="color: #10b981; font-size: 18px;">Email Marketing</strong>
                                        <div style="font-size: 14px; color: #999; margin-top: 5px;">YA DISPONIBLE</div>
                                    </div>
                                </div>

                                <div style="display: flex; align-items: center; margin-bottom: 20px; padding: 15px; background: rgba(255, 107, 107, 0.1); border-radius: 12px; border: 1px solid rgba(255, 107, 107, 0.3);">
                                    <div style="width: 8px; height: 8px; background: #ff6b6b; border-radius: 50%; margin-right: 15px; box-shadow: 0 0 10px #ff6b6b; animation: pulse-dot 1.5s ease-in-out infinite;"></div>
                                    <div style="flex: 1;">
                                        <strong style="color: #ffffff; font-size: 18px;">Fundamentos Marketing Digital</strong>
                                        <div style="font-size: 14px; color: #ff6b6b; margin-top: 5px; font-weight: 600;">SE PUBLICA: 30 OCTUBRE 2025</div>
                                    </div>
                                </div>

                                <div style="display: flex; align-items: center; padding: 15px; background: rgba(255, 107, 107, 0.1); border-radius: 12px; border: 1px solid rgba(255, 107, 107, 0.3);">
                                    <div style="width: 8px; height: 8px; background: #ff6b6b; border-radius: 50%; margin-right: 15px; box-shadow: 0 0 10px #ff6b6b; animation: pulse-dot 1.5s ease-in-out infinite;"></div>
                                    <div style="flex: 1;">
                                        <strong style="color: #ffffff; font-size: 18px;">Inteligencia Artificial Aplicada</strong>
                                        <div style="font-size: 14px; color: #ff6b6b; margin-top: 5px; font-weight: 600;">SE PUBLICA: 30 OCTUBRE 2025</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Price Comparison -->
                            <div style="margin: 50px 0;">
                                <div style="text-decoration: line-through; color: #666; font-size: 32px; margin-bottom: 10px; font-family: 'JetBrains Mono', monospace;">
                                    $197 USD
                                </div>
                                <div style="font-size: 18px; color: #ff6b6b; margin-bottom: 20px; font-weight: 600;">
                                    (Precio cuando se publiquen todos los cursos)
                                </div>

                                <div style="font-size: 72px; font-weight: 800; color: #10b981; margin: 20px 0; font-family: 'JetBrains Mono', monospace; text-shadow: 0 0 40px rgba(16, 185, 129, 0.5);">
                                    $17 USD
                                </div>

                                <div style="font-size: 16px; color: #10b981; margin-top: 15px; font-weight: 600;">
                                    ACCESO DE POR VIDA A TODOS LOS CURSOS
                                </div>
                            </div>

                            <!-- Urgency Warning -->
                            <div style="background: rgba(255, 107, 107, 0.15); border: 2px solid #ff6b6b; border-radius: 12px; padding: 25px; margin: 30px 0;">
                                <p style="font-size: 17px; color: #ffffff; margin: 0; line-height: 1.6;">
                                    <strong style="color: #ff6b6b;">⚠️ IMPORTANTE:</strong> Este precio de $17 USD es <strong>SÓLO para los early adopters</strong> que entran ahora. El 30 de Octubre cuando se publiquen todos los cursos, el precio subirá a $197 USD y esta oferta <strong style="color: #ff6b6b;">NO volverá a estar disponible</strong>.
                                </p>
                            </div>

                            <!-- CTA Button -->
                            <a href="https://www.skool.com/datapify-5935/about?ref=2e0bc2d2785c43e78264cb71f9a7fffc"
                               target="_blank"
                               id="finalCTA"
                               style="display: inline-block; background: linear-gradient(135deg, #10b981, #059669); color: #ffffff; padding: 25px 60px; border-radius: 12px; font-size: 22px; font-weight: 800; text-decoration: none; margin-top: 30px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 10px 40px rgba(16, 185, 129, 0.4); font-family: 'JetBrains Mono', monospace; text-transform: uppercase; letter-spacing: 2px; border: 2px solid #10b981;">
                                ASEGURAR MI ACCESO AHORA
                            </a>

                            <p style="font-size: 14px; color: #666; margin-top: 25px;">
                                Serás redirigido a Skool para completar tu registro
                            </p>
                        </div>

                        <!-- Additional Reasons -->
                        <div style="text-align: left; margin-top: 50px;">
                            <h3 style="font-size: 24px; color: #ffffff; margin-bottom: 25px; text-align: center;">¿Por qué deberías unirte HOY?</h3>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px;">
                                <div style="background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(16, 185, 129, 0.2); border-radius: 12px; padding: 25px;">
                                    <div style="font-size: 36px; margin-bottom: 15px;">💰</div>
                                    <strong style="color: #10b981; font-size: 18px;">Ahorro Real</strong>
                                    <p style="font-size: 15px; color: #999; margin-top: 10px; line-height: 1.6;">
                                        Ahorras $180 USD entrando ahora vs. cuando estén todos los cursos publicados.
                                    </p>
                                </div>

                                <div style="background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(16, 185, 129, 0.2); border-radius: 12px; padding: 25px;">
                                    <div style="font-size: 36px; margin-bottom: 15px;">🚀</div>
                                    <strong style="color: #10b981; font-size: 18px;">Acceso Inmediato</strong>
                                    <p style="font-size: 15px; color: #999; margin-top: 10px; line-height: 1.6;">
                                        Empieza HOY con Shopify y Email Marketing mientras esperamos los otros cursos.
                                    </p>
                                </div>

                                <div style="background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(16, 185, 129, 0.2); border-radius: 12px; padding: 25px;">
                                    <div style="font-size: 36px; margin-bottom: 15px;">👥</div>
                                    <strong style="color: #10b981; font-size: 18px;">Comunidad Exclusiva</strong>
                                    <p style="font-size: 15px; color: #999; margin-top: 10px; line-height: 1.6;">
                                        Conéctate con otros que piensan como tú. Soporte directo de Nacho.
                                    </p>
                                </div>

                                <div style="background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(16, 185, 129, 0.2); border-radius: 12px; padding: 25px;">
                                    <div style="font-size: 36px; margin-bottom: 15px;">🔓</div>
                                    <strong style="color: #10b981; font-size: 18px;">Lifetime Access</strong>
                                    <p style="font-size: 15px; color: #999; margin-top: 10px; line-height: 1.6;">
                                        Un solo pago, acceso de por vida a TODO. Sin mensualidades ocultas.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <!-- Final CTA -->
                        <div style="margin-top: 60px; padding: 40px; background: rgba(16, 185, 129, 0.05); border-radius: 16px; border: 2px solid #10b981;">
                            <p style="font-size: 22px; color: #ffffff; margin-bottom: 25px; line-height: 1.6;">
                                No vas a encontrar esta oferta en otro lado.<br>
                                <strong style="color: #10b981;">$17 USD por todo esto es un regalo.</strong>
                            </p>

                            <a href="https://www.skool.com/datapify-5935/about?ref=2e0bc2d2785c43e78264cb71f9a7fffc"
                               target="_blank"
                               style="display: inline-block; background: linear-gradient(135deg, #10b981, #059669); color: #ffffff; padding: 25px 60px; border-radius: 12px; font-size: 22px; font-weight: 800; text-decoration: none; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 10px 40px rgba(16, 185, 129, 0.4); font-family: 'JetBrains Mono', monospace; text-transform: uppercase; letter-spacing: 2px; border: 2px solid #10b981;">
                                SÍ, QUIERO MI ACCESO POR $17
                            </a>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // GAME STATE
        // ============================================
        let currentStep = 1;
        const totalSteps = 6;

        // ============================================
        // CUSTOM CURSOR
        // ============================================
        const cursor = document.querySelector('.custom-cursor');
        let mouseX = 0, mouseY = 0;
        let cursorX = 0, cursorY = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });

        function animateCursor() {
            cursorX += (mouseX - cursorX) * 0.2;
            cursorY += (mouseY - cursorY) * 0.2;
            cursor.style.left = cursorX - 10 + 'px';
            cursor.style.top = cursorY - 10 + 'px';
            requestAnimationFrame(animateCursor);
        }
        animateCursor();

        document.addEventListener('mousedown', () => cursor.classList.add('clicking'));
        document.addEventListener('mouseup', () => cursor.classList.remove('clicking'));

        // ============================================
        // MATRIX BACKGROUND
        // ============================================
        const canvas = document.getElementById('matrixCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const matrix = "ESTONOESMARKETING01";
        const fontSize = 12;
        const columns = canvas.width / fontSize;
        const drops = [];

        for (let i = 0; i < columns; i++) {
            drops[i] = Math.random() * -100;
        }

        function drawMatrix() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#10b981';
            ctx.font = fontSize + 'px monospace';

            for (let i = 0; i < drops.length; i++) {
                const text = matrix[Math.floor(Math.random() * matrix.length)];
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);

                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
                drops[i]++;
            }
        }

        setInterval(drawMatrix, 40);

        // ============================================
        // PROGRESS DOTS UPDATE
        // ============================================
        function updateProgress(step) {
            const dots = document.querySelectorAll('.dot');
            dots.forEach((dot, index) => {
                if (index < step) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        // ============================================
        // TRANSITION WITH PORTAL
        // ============================================
        function transitionToStep(nextStep) {
            const currentStepEl = document.getElementById(`step${currentStep}`);
            const nextStepEl = document.getElementById(`step${nextStep}`);
            const tunnelOverlay = document.getElementById('tunnelOverlay');
            const tunnel = document.getElementById('tunnel');

            // Show portal overlay
            tunnelOverlay.classList.add('active');

            // Create portal effect
            tunnel.innerHTML = '';

            // Center glow
            const glow = document.createElement('div');
            glow.className = 'center-glow';
            tunnel.appendChild(glow);

            // Portal circles (6 expanding circles)
            for (let i = 0; i < 6; i++) {
                const circle = document.createElement('div');
                circle.className = 'portal-circle';
                tunnel.appendChild(circle);
            }

            // Create spiral particles
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'vortex-particle';

                // Random position in spiral
                const angle = (i / 50) * Math.PI * 4;
                const distance = (i / 50) * 100;
                const x = Math.cos(angle) * distance;
                const y = Math.sin(angle) * distance;

                particle.style.left = `calc(50% + ${x}px)`;
                particle.style.top = `calc(50% + ${y}px)`;
                particle.style.animation = `vortex-spin ${1 + Math.random() * 0.5}s ease-out forwards`;
                particle.style.animationDelay = `${i * 0.02}s`;

                tunnel.appendChild(particle);
            }

            // Add "ACCESO AUTORIZADO" text
            const portalText = document.createElement('div');
            portalText.className = 'portal-text';
            portalText.textContent = 'ACCESO AUTORIZADO';
            tunnel.appendChild(portalText);

            // Hide current step
            currentStepEl.classList.remove('active');

            // After portal animation, show next step
            setTimeout(() => {
                nextStepEl.classList.add('active');
                tunnelOverlay.classList.remove('active');
                currentStep = nextStep;
                updateProgress(currentStep);

                trackEvent(`step_${nextStep}_viewed`, `transition_complete`);
            }, 2000);
        }

        // ============================================
        // STEP 1: UNLOCK LOCK
        // ============================================
        document.getElementById('openBoxBtn').addEventListener('click', function() {
            const lockContainer = document.getElementById('lockContainer');
            const btn = this;

            // Add unlocking animation to lock
            lockContainer.classList.add('unlocking');

            // Wait for shackle to open (0.5s)
            setTimeout(() => {
                // MEGA EXPLOSION
                const duration = 2000;
                const animationEnd = Date.now() + duration;

                const interval = setInterval(() => {
                    const timeLeft = animationEnd - Date.now();

                    if (timeLeft <= 0) {
                        clearInterval(interval);
                        return;
                    }

                    confetti({
                        particleCount: 3,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: ['#10b981', '#ff6b6b', '#ffffff']
                });
                confetti({
                    particleCount: 3,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: ['#10b981', '#ff6b6b', '#ffffff']
                });
            }, 50);

            // Center explosion
            confetti({
                particleCount: 200,
                spread: 180,
                origin: { y: 0.5 },
                colors: ['#10b981', '#ff6b6b', '#ffffff'],
                shapes: ['circle', 'square'],
                gravity: 1,
                scalar: 1.5,
                ticks: 300
            });

                // Hide lock
                lockContainer.style.transition = 'all 0.5s ease';
                lockContainer.style.transform = 'scale(0) rotate(360deg)';
                lockContainer.style.opacity = '0';

                btn.style.transition = 'all 0.3s ease';
                btn.style.opacity = '0';
                btn.style.transform = 'scale(0)';

                trackEvent('lock_unlocked', 'step_1');

                // Start tunnel transition to step 1.5
                setTimeout(() => {
                const currentStepEl = document.getElementById('step1');
                const nextStepEl = document.getElementById('step1-5');
                const tunnelOverlay = document.getElementById('tunnelOverlay');
                const tunnel = document.getElementById('tunnel');

                tunnelOverlay.classList.add('active');
                tunnel.innerHTML = '';

                const glow = document.createElement('div');
                glow.className = 'center-glow';
                tunnel.appendChild(glow);

                for (let i = 0; i < 6; i++) {
                    const circle = document.createElement('div');
                    circle.className = 'portal-circle';
                    tunnel.appendChild(circle);
                }

                for (let i = 0; i < 50; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'vortex-particle';
                    const angle = (i / 50) * Math.PI * 4;
                    const distance = (i / 50) * 100;
                    const x = Math.cos(angle) * distance;
                    const y = Math.sin(angle) * distance;
                    particle.style.left = `calc(50% + ${x}px)`;
                    particle.style.top = `calc(50% + ${y}px)`;
                    particle.style.animation = `vortex-spin ${1 + Math.random() * 0.5}s ease-out forwards`;
                    particle.style.animationDelay = `${i * 0.02}s`;
                    tunnel.appendChild(particle);
                }

                // Add "ACCESO AUTORIZADO" text
                const portalText = document.createElement('div');
                portalText.className = 'portal-text';
                portalText.textContent = 'ACCESO AUTORIZADO';
                tunnel.appendChild(portalText);

                currentStepEl.classList.remove('active');

                setTimeout(() => {
                    nextStepEl.classList.add('active');
                    tunnelOverlay.classList.remove('active');
                    currentStep = 1.5;
                    updateProgress(2);
                    trackEvent('step_1.5_viewed', 'revelation_screen');
                }, 2000);
                }, 800);
            }, 500);
        });

        // ============================================
        // SYSTEM ALERT FUNCTION
        // ============================================
        function showSystemAlert(message, icon = '💡', duration = 2500) {
            const alert = document.getElementById('systemAlert');
            const alertIcon = alert.querySelector('.alert-icon');
            const alertText = alert.querySelector('.alert-text');

            alertIcon.textContent = icon;
            alertText.textContent = message;

            alert.classList.remove('hide');
            alert.classList.add('show');

            // Auto-dismiss
            setTimeout(() => {
                alert.classList.remove('show');
                alert.classList.add('hide');

                setTimeout(() => {
                    alert.classList.remove('hide');
                }, 300);
            }, duration);

            trackEvent('system_alert_shown', message);
        }

        // ============================================
        // GLASS SHATTER EFFECT
        // ============================================
        function shatterGlass(boxElement, callback) {
            const box = boxElement;
            const rect = box.getBoundingClientRect();

            // Create crack overlay
            const crackOverlay = document.createElement('div');
            crackOverlay.className = 'crack-overlay';
            box.appendChild(crackOverlay);

            // Create crack lines
            const numCracks = 15;
            for (let i = 0; i < numCracks; i++) {
                const crack = document.createElement('div');
                crack.className = 'crack-line';

                const isVertical = Math.random() > 0.5;
                if (isVertical) {
                    crack.style.width = '2px';
                    crack.style.height = Math.random() * 200 + 100 + 'px';
                    crack.style.left = Math.random() * 100 + '%';
                    crack.style.top = Math.random() * 100 + '%';
                } else {
                    crack.style.height = '2px';
                    crack.style.width = Math.random() * 200 + 100 + 'px';
                    crack.style.top = Math.random() * 100 + '%';
                    crack.style.left = Math.random() * 100 + '%';
                }

                crack.style.animationDelay = `${i * 0.02}s`;
                crackOverlay.appendChild(crack);
            }

            setTimeout(() => {
                crackOverlay.classList.add('active');
            }, 50);

            // After cracks appear, shatter into pieces
            setTimeout(() => {
                box.classList.add('shattering');

                // Create shards
                const rows = 5;
                const cols = 5;
                const shardWidth = rect.width / cols;
                const shardHeight = rect.height / rows;

                for (let row = 0; row < rows; row++) {
                    for (let col = 0; col < cols; col++) {
                        const shard = document.createElement('div');
                        shard.className = 'glass-shard';
                        shard.style.width = shardWidth + 'px';
                        shard.style.height = shardHeight + 'px';
                        shard.style.left = (col * shardWidth) + 'px';
                        shard.style.top = (row * shardHeight) + 'px';

                        // Random fall direction
                        const tx = (Math.random() - 0.5) * 400;
                        const rotate = (Math.random() - 0.5) * 720;

                        shard.style.setProperty('--tx', tx + 'px');
                        shard.style.setProperty('--rotate', rotate + 'deg');
                        shard.style.animation = `shatter-fall ${0.8 + Math.random() * 0.4}s ease-in forwards`;
                        shard.style.animationDelay = `${(row + col) * 0.02}s`;

                        box.appendChild(shard);
                    }
                }

                // Hide original content
                const messageContent = box.querySelector('.message-content');
                if (messageContent) {
                    setTimeout(() => {
                        messageContent.style.opacity = '0';
                    }, 200);
                }

                // Call callback after shatter completes
                setTimeout(() => {
                    if (callback) callback();
                }, 1200);
            }, 400);
        }

        // ============================================
        // STEP 1.5: "VEAMOS QUÉ SIGUE"
        // ============================================
        document.getElementById('step1-5Btn').addEventListener('click', function() {
            const glassBox = document.getElementById('glassBox');

            // Confetti
            confetti({
                particleCount: 80,
                spread: 60,
                origin: { y: 0.6 },
                colors: ['#10b981', '#ff6b6b', '#ffffff']
            });

            trackEvent('step_1.5_continue', 'glass_shatter_triggered');

            // Shatter the glass
            shatterGlass(glassBox, () => {
                // After shatter, go to step 2 (presentation)
                const currentStepEl = document.getElementById('step1-5');
                const nextStepEl = document.getElementById('step2');

                currentStepEl.classList.remove('active');
                nextStepEl.classList.add('active');
                currentStep = 2;
                updateProgress(3);

                // Mini celebration when photo appears
                setTimeout(() => {
                    confetti({
                        particleCount: 50,
                        angle: 90,
                        spread: 45,
                        origin: { y: 0.4 },
                        colors: ['#10b981', '#ffffff'],
                        gravity: 1.2
                    });
                }, 300);

                trackEvent('step_2_viewed', 'personal_intro');
            });
        });

        // ============================================
        // GLITCH TRANSITION (for step 3 -> 4)
        // ============================================
        function transitionWithGlitch(nextStep) {
            const currentStepEl = document.getElementById(`step${currentStep}`);
            const nextStepEl = document.getElementById(`step${nextStep}`);
            const glitchOverlay = document.getElementById('glitchOverlay');
            const glitchText = document.getElementById('glitchText');

            const glitchMessages = [
                'RECALCULANDO',
                'ANALIZANDO DATOS',
                'PROCESANDO',
                'SISTEMA ACTUALIZADO'
            ];

            let messageIndex = 0;

            // Show glitch overlay
            glitchOverlay.classList.add('active');
            currentStepEl.classList.remove('active');

            // Change glitch messages rapidly
            const glitchInterval = setInterval(() => {
                messageIndex = (messageIndex + 1) % glitchMessages.length;
                glitchText.textContent = glitchMessages[messageIndex];
            }, 400);

            // After glitch effect, show next step
            setTimeout(() => {
                clearInterval(glitchInterval);
                glitchOverlay.classList.remove('active');
                nextStepEl.classList.add('active');
                currentStep = nextStep;
                updateProgress(currentStep);

                // Confetti after glitch
                setTimeout(() => {
                    confetti({
                        particleCount: 100,
                        spread: 70,
                        origin: { y: 0.6 },
                        colors: ['#10b981', '#ff6b6b', '#ffffff']
                    });
                }, 300);

                trackEvent(`step_${nextStep}_viewed`, `glitch_transition_complete`);
            }, 2500);
        }

        // ============================================
        // LOADING TRANSITION (for step 2 -> 3)
        // ============================================
        function transitionWithLoading(nextStep) {
            const currentStepEl = document.getElementById(`step${currentStep}`);
            const nextStepEl = document.getElementById(`step${nextStep}`);
            const loadingScreen = document.getElementById('loadingScreen');
            const loadingText = document.getElementById('loadingText');
            const loadingPercentage = document.getElementById('loadingPercentage');

            // Frases que van cambiando
            const loadingPhrases = [
                '> ANALIZANDO NIVELES DE HONESTIDAD...',
                '> DESBLOQUEANDO HONESTIDAD BRUTAL...',
                '> PREPARANDO OFERTA...',
                '> OK... EL USUARIO ESTÁ LISTO.'
            ];

            let currentPhrase = 0;

            // Show loading screen
            loadingScreen.classList.add('active');
            currentStepEl.classList.remove('active');

            // Animate percentage
            let percentage = 0;
            const percentInterval = setInterval(() => {
                percentage += Math.random() * 8;
                if (percentage > 100) percentage = 100;
                loadingPercentage.textContent = Math.floor(percentage) + '%';

                if (percentage >= 100) {
                    clearInterval(percentInterval);
                }
            }, 150);

            // Change phrases
            const phraseInterval = setInterval(() => {
                currentPhrase = (currentPhrase + 1) % loadingPhrases.length;
                loadingText.textContent = loadingPhrases[currentPhrase];

                // Add glitch effect randomly
                if (Math.random() > 0.7) {
                    loadingText.classList.add('glitch');
                    setTimeout(() => loadingText.classList.remove('glitch'), 300);
                }
            }, 1200);

            // After loading completes
            setTimeout(() => {
                clearInterval(phraseInterval);
                loadingScreen.classList.remove('active');
                nextStepEl.classList.add('active');
                currentStep = nextStep;
                updateProgress(currentStep);

                // Reset loading bar for next time
                setTimeout(() => {
                    loadingPercentage.textContent = '0%';
                    loadingText.textContent = '> ANALIZANDO NIVELES DE HONESTIDAD...';
                }, 500);

                trackEvent(`step_${nextStep}_viewed`, `loading_transition_complete`);
            }, 6000);
        }

        // ============================================
        // STEP 2: CONTINUE
        // ============================================
        document.getElementById('step2Btn').addEventListener('click', function() {
            // Mini explosion
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#10b981', '#ffffff']
            });

            trackEvent('step_2_continue', 'personal_intro_complete');

            // Use loading transition instead of portal
            transitionWithLoading(3);
        });

        // ============================================
        // STEP 3: CONTINUE (PLACEHOLDER)
        // ============================================
        document.getElementById('step3Btn').addEventListener('click', function() {
            trackEvent('step_3_continue', 'paradox_explained');

            // Transición con efecto glitch
            transitionWithGlitch(4);
        });

        // ============================================
        // STEP 4: REVELACIÓN IA
        // ============================================
        document.getElementById('step4Btn').addEventListener('click', function() {
            // Celebración IA revelada
            confetti({
                particleCount: 200,
                spread: 120,
                origin: { y: 0.5 },
                colors: ['#10b981', '#ff6b6b', '#ffffff'],
                gravity: 0.8,
                scalar: 2
            });

            trackEvent('step_4_continue', 'ai_revelation_accepted');

            // Transición al video final
            setTimeout(() => {
                transitionWithLoading(5);
            }, 800);
        });

        // ============================================
        // STEP 5: VIDEO VISTO → OFERTA FINAL (SIN TRANSICIÓN)
        // ============================================
        document.getElementById('step5Btn').addEventListener('click', function() {
            trackEvent('step_5_continue', 'video_watched');

            // Transición directa sin animación
            const currentStepEl = document.getElementById('step5');
            const nextStepEl = document.getElementById('step6');

            currentStepEl.classList.remove('active');
            nextStepEl.classList.add('active');
            currentStep = 6;
            updateProgress(6);

            // Confetti de celebración final
            setTimeout(() => {
                confetti({
                    particleCount: 150,
                    spread: 80,
                    origin: { y: 0.6 },
                    colors: ['#10b981', '#ffffff']
                });
            }, 300);

            trackEvent('step_6_viewed', 'final_offer');

            // Start countdown timer (15 minutes)
            startCountdown();
        });

        // ============================================
        // COUNTDOWN TIMER (15 MINUTES)
        // ============================================
        let countdownInterval;

        function startCountdown() {
            let timeLeft = 15 * 60; // 15 minutes in seconds
            const timerDisplay = document.getElementById('countdownTimer');

            function updateTimer() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;

                // Format: MM:SS
                timerDisplay.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

                // Change color when time is running out
                if (timeLeft <= 60) {
                    timerDisplay.style.color = '#ff6b6b';
                    timerDisplay.style.animation = 'pulse-glow 0.5s ease-in-out infinite';
                } else if (timeLeft <= 300) {
                    timerDisplay.style.color = '#ff6b6b';
                }

                if (timeLeft <= 0) {
                    clearInterval(countdownInterval);
                    timerDisplay.textContent = '00:00';
                    timerDisplay.style.color = '#ff6b6b';

                    // Opcional: deshabilitar CTAs cuando expire
                    // document.getElementById('finalCTA').style.opacity = '0.5';
                    // document.getElementById('finalCTA').style.pointerEvents = 'none';
                } else {
                    timeLeft--;
                }
            }

            // Update immediately
            updateTimer();

            // Update every second
            countdownInterval = setInterval(updateTimer, 1000);
        }

        // Track CTA clicks
        document.getElementById('finalCTA').addEventListener('click', function() {
            trackEvent('final_cta_clicked', 'skool_redirect');
        });

        // ============================================
        // TRACKING
        // ============================================
        function trackEvent(eventName, eventLabel) {
            console.log(`📊 Event: ${eventName} | Label: ${eventLabel}`);

            if (typeof gtag === 'function') {
                gtag('event', eventName, {
                    event_category: 'Dopamine_Funnel',
                    event_label: eventLabel,
                    step: currentStep
                });
            }

            if (typeof fbq === 'function') {
                fbq('trackCustom', eventName, {
                    label: eventLabel,
                    step: currentStep
                });
            }

            if (typeof clarity === 'function') {
                clarity('event', eventName, {
                    label: eventLabel
                });
            }
        }

        // ============================================
        // CONSOLE EASTER EGG
        // ============================================
        console.log('%c🚀 ESTO NO ES MARKETING', 'color: #10b981; font-size: 30px; font-weight: bold;');
        console.log('%c> Cada click libera dopamina._', 'color: #ffffff; font-size: 14px;');

        // ============================================
        // INIT
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            trackEvent('funnel_started', 'step_1');
            updateProgress(1);
        });
    </script>
</body>
</html>